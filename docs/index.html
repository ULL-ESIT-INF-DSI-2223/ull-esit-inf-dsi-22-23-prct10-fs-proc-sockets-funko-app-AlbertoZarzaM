<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>doc-test</title><meta name="description" content="Documentation for doc-test"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os"</script><header class="tsd-page-toolbar">
<div class="tsd-toolbar-contents container">
<div class="table-cell" id="tsd-search" data-base=".">
<div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M15.7824 13.833L12.6666 10.7177C12.5259 10.5771 12.3353 10.499 12.1353 10.499H11.6259C12.4884 9.39596 13.001 8.00859 13.001 6.49937C13.001 2.90909 10.0914 0 6.50048 0C2.90959 0 0 2.90909 0 6.49937C0 10.0896 2.90959 12.9987 6.50048 12.9987C8.00996 12.9987 9.39756 12.4863 10.5008 11.6239V12.1332C10.5008 12.3332 10.5789 12.5238 10.7195 12.6644L13.8354 15.7797C14.1292 16.0734 14.6042 16.0734 14.8948 15.7797L15.7793 14.8954C16.0731 14.6017 16.0731 14.1267 15.7824 13.833ZM6.50048 10.499C4.29094 10.499 2.50018 8.71165 2.50018 6.49937C2.50018 4.29021 4.28781 2.49976 6.50048 2.49976C8.71001 2.49976 10.5008 4.28708 10.5008 6.49937C10.5008 8.70852 8.71314 10.499 6.50048 10.499Z" fill="var(--color-text)"></path></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div>
<div class="field">
<div id="tsd-toolbar-links"></div></div>
<ul class="results">
<li class="state loading">Preparing search index...</li>
<li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">doc-test</a></div>
<div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><rect x="1" y="3" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="7" width="14" height="2" fill="var(--color-text)"></rect><rect x="1" y="11" width="14" height="2" fill="var(--color-text)"></rect></svg></a></div></div></header>
<div class="container container-main">
<div class="col-8 col-content">
<div class="tsd-page-title">
<h2>doc-test</h2></div>
<div class="tsd-panel tsd-typography">
<a href="#informe-práctica-10" id="informe-práctica-10" style="color: inherit; text-decoration: none;">
  <h1>Informe práctica 10</h1>
</a>
<p><em><strong>Por: Alberto Zarza Martín (<a href="mailto:alu0101412993@ull.edu.es">alu0101412993@ull.edu.es</a>)</strong></em></p>

<a href="#introducción" id="introducción" style="color: inherit; text-decoration: none;">
  <h2>Introducción</h2>
</a>
<p>  En esta práctica vamos a realizar 3 ejercicios que nos ayudará a profundizar en el uso de las clases y las interfaces en TypeScript, por otra parte también mencionar el uso de Modulos ESM como yargs o chalk. Además, vamos a desarrollar 1 ejercicio que se ha propuesto en la sesion de practicas para practicar y verficicar los conocimientos adquiridos en las clases anteriores.</p>

<a href="#dispositivo-de-trabajo" id="dispositivo-de-trabajo" style="color: inherit; text-decoration: none;">
  <h2>Dispositivo de trabajo</h2>
</a>
<p>  Para el desarrollo de esta práctica he utilizado un sistema operativo Ubuntu por lo cual algunos de los pasos realizados solo estarán disponibles para los usuarios que utilicen este sistema operativo.</p>

<a href="#coveralls" id="coveralls" style="color: inherit; text-decoration: none;">
  <h2>Coveralls</h2>
</a>
<p><a href="https://coveralls.io/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-AlbertoZarzaM?branch=main"><img src="https://coveralls.io/repos/github/ULL-ESIT-INF-DSI-2223/ull-esit-inf-dsi-22-23-prct09-funko-app-AlbertoZarzaM/badge.svg?branch=main" alt="Coverage Status"></a></p>

<a href="#ejercicio-1" id="ejercicio-1" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 1</h2>
</a>
<p>En este primer ejercicio se nos pide comentar cómo sería la traza del siguiente código:</p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> {</span><span class="hl-2">access</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">, </span><span class="hl-2">watch</span><span class="hl-1">} </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&#39;fs&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> !== </span><span class="hl-4">3</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Please, specify a file&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">filename</span><span class="hl-1"> = </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">];</span><br/><br/><span class="hl-1">  </span><span class="hl-5">access</span><span class="hl-1">(</span><span class="hl-2">filename</span><span class="hl-1">, </span><span class="hl-2">constants</span><span class="hl-1">.</span><span class="hl-7">F_OK</span><span class="hl-1">, (</span><span class="hl-2">err</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> does not exist`</span><span class="hl-1">);</span><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Starting to watch file </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">watcher</span><span class="hl-1"> = </span><span class="hl-5">watch</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">[</span><span class="hl-4">2</span><span class="hl-1">]);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">watcher</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;change&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> has been modified somehow`</span><span class="hl-1">);</span><br/><span class="hl-1">      });</span><br/><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`File </span><span class="hl-6">${</span><span class="hl-2">filename</span><span class="hl-6">}</span><span class="hl-3"> is no longer watched`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">}</span>
</code></pre>
<p>  En primer lugar, se importan los módulos necesarios para el desarrollo del ejercicio. En este caso se importan los módulos access, constants y watch del módulo fs.</p>
<p>  A continuación, se comprueba que el número de argumentos introducidos por el usuario es correcto, en caso de que no sea correcto se muestra un mensaje de error por pantalla.</p>
<p>  En caso de que el número de argumentos sea correcto, se crea una variable llamada filename que almacena el nombre del archivo que se va a comprobar.</p>
<p>  A continuación, se llama al método access del módulo fs, el cual recibe como parámetros el nombre del archivo, las constantes de acceso y una función de callback. En este caso, la función de callback recibe como parámetro un error, en caso de que el error sea null, significa que el archivo existe y se muestra un mensaje por pantalla indicando que se va a empezar a observar el archivo. En caso de que el error no sea null, significa que el archivo no existe y se muestra un mensaje por pantalla indicando que el archivo no existe.</p>
<p>  En caso de que el archivo exista, se llama al método watch del módulo fs, el cual recibe como parámetro el nombre del archivo. Este método devuelve un objeto de tipo watcher, el cual tiene un método on que recibe como parámetro el nombre del evento y una función de callback. En este caso, el evento que se está observando es el evento change, el cual se ejecuta cuando el archivo es modificado de alguna manera. En este caso, la función de callback recibe como parámetro el nombre del archivo y muestra un mensaje por pantalla indicando que el archivo ha sido modificado de alguna manera.</p>
<p>  Por último, se muestra un mensaje por pantalla indicando que el archivo ya no se está observando.</p>
<p>  A continuación, se muestra la traza de ejecución del código anterior:</p>
<pre><code class="language-typescript"><span class="hl-2">Starting</span><span class="hl-1"> </span><span class="hl-2">to</span><span class="hl-1"> </span><span class="hl-2">watch</span><span class="hl-1"> </span><span class="hl-2">file</span><span class="hl-1"> ./</span><span class="hl-2">dist</span><span class="hl-1">/</span><span class="hl-2">Ejercicio_P10</span><span class="hl-1">/</span><span class="hl-2">hola</span><span class="hl-1">.</span><span class="hl-2">txt</span><br/><span class="hl-2">File</span><span class="hl-1"> ./</span><span class="hl-2">dist</span><span class="hl-1">/</span><span class="hl-2">Ejercicio_P10</span><span class="hl-1">/</span><span class="hl-2">hola</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">is</span><span class="hl-1"> </span><span class="hl-2">no</span><span class="hl-1"> </span><span class="hl-2">longer</span><span class="hl-1"> </span><span class="hl-2">watched</span><br/><span class="hl-2">File</span><span class="hl-1"> ./</span><span class="hl-2">dist</span><span class="hl-1">/</span><span class="hl-2">Ejercicio_P10</span><span class="hl-1">/</span><span class="hl-2">hola</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1"> </span><span class="hl-2">been</span><span class="hl-1"> </span><span class="hl-2">modified</span><span class="hl-1"> </span><span class="hl-2">somehow</span><br/><span class="hl-2">File</span><span class="hl-1"> ./</span><span class="hl-2">dist</span><span class="hl-1">/</span><span class="hl-2">Ejercicio_P10</span><span class="hl-1">/</span><span class="hl-2">hola</span><span class="hl-1">.</span><span class="hl-2">txt</span><span class="hl-1"> </span><span class="hl-2">has</span><span class="hl-1"> </span><span class="hl-2">been</span><span class="hl-1"> </span><span class="hl-2">modified</span><span class="hl-1"> </span><span class="hl-2">somehow</span><br/>
</code></pre>
<p>En cuanto a la pila de llamadas, se muestra a continuación:</p>
<p>console.log(&#39;Please, specify a file&#39;);
console.log(<code>Starting to watch file ${filename}</code>);
console.log(<code>File ${filename} is no longer watched</code>);
watcher.on(&#39;change&#39;, () =&gt; {
  console.log(<code>File ${filename} has been modified somehow</code>);
});</p>
<p>El watcher.on pasa al registro de eventos, y cuando se produce el evento change, se ejecuta la función de callback, que es la que muestra el mensaje por pantalla.</p>
<p>Una vez se detecta el evento change, en el registro de eventos se pasa a la cola de manejo de eventos hasta esperar a que se vacíe la pila de llamadas. Una vez se vacía la pila de llamadas, se ejecuta la función de callback del watcher.on, que es la que muestra el mensaje por pantalla.</p>

<a href="#ejercicio-2---child-processes" id="ejercicio-2---child-processes" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 2 - Child Processes</h2>
</a>
<p>En este ejercicio se nos pide desarrollar un programa que reciba como parámetro el nombre de un fichero y muestre por pantalla el número de líneas, palabras y caracteres que contiene el fichero. Para ello, se ha utilizado el módulo child_process. Para el ejercicio se nos pide dos maneras de realizarlo, una de ellas es utilizando el metodo pipe y la otra es sin utilizar el metodo pipe.</p>
<p>  A continuación, se muestra el código desarrollado:</p>
<pre><code class="language-typescript"><br/><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">.</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Reads a file&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File path&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">lines:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File lines&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">words:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File words&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">chars:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File chars&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">} ,(</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-8">//si el ficher existe</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">)) {</span><br/><span class="hl-1">    </span><span class="hl-8">//si el ficher es un archivo</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">lstatSync</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">).</span><span class="hl-5">isFile</span><span class="hl-1">()) {</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">lines</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-l&#39;</span><span class="hl-1">, </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);</span><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">;</span><br/><span class="hl-1">        } );</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">[</span><span class="hl-4">0</span><span class="hl-1">] + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1"> );</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        );</span><br/><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-w&#39;</span><span class="hl-1">, </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);</span><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">[</span><span class="hl-4">0</span><span class="hl-1">] + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">chars</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-c&#39;</span><span class="hl-1">, </span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);</span><br/><span class="hl-1">        </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">[</span><span class="hl-4">0</span><span class="hl-1">] + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">    } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;El fichero no es un archivo&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;El fichero no existe&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><br/><span class="hl-1">})</span><br/><span class="hl-1">.</span><span class="hl-5">help</span><span class="hl-1">()</span><br/><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">;</span>
</code></pre>
<p>En este primer codigo podemos ver como se ha desarrollado el codigo integramente sin el uso de metodo pipe. La manera de proceder ha sido la siguiente: </p>
<p>  Se ha creado un objeto de tipo spawn, el cual recibe como parámetros el comando a ejecutar y los argumentos que recibe dicho comando. En este caso, el comando es wc y los argumentos son -l, -w y -c, que son los argumentos que se utilizan para contar las lineas, palabras y caracteres respectivamente. Una vez se ha creado el objeto de tipo spawn, se ha creado un evento de tipo data, el cual recibe como parámetro una pieza de datos. En este caso, la pieza de datos es la salida del comando wc. Una vez se ha recibido la pieza de datos, se ha concatenado a la variable wcOutput. Una vez se ha recibido toda la salida del comando wc, se ha creado un evento de tipo close, el cual recibe como parámetro una función de callback. En este caso, la función de callback muestra por pantalla la salida del comando wc.</p>
<p>  A continuación, se muestra el código desarrollado utilizando el metodo pipe:</p>
<pre><code class="language-typescript"><span class="hl-5">yargs</span><span class="hl-1">(</span><span class="hl-5">hideBin</span><span class="hl-1">(</span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">argv</span><span class="hl-1">))</span><br/><span class="hl-1">    .</span><span class="hl-5">command</span><span class="hl-1">(</span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;Reads a file&#39;</span><span class="hl-1">, {</span><br/><span class="hl-1">      </span><span class="hl-2">file:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File path&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;string&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">lines:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File lines&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">words:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File words&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">chars:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&#39;File chars&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;boolean&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">demandOption:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    } , (</span><span class="hl-2">argv</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-8">//si el ficher existe</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">existsSync</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">)) {</span><br/><span class="hl-1">        </span><span class="hl-8">//si el ficher es un archivo</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">lstatSync</span><span class="hl-1">(</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">).</span><span class="hl-5">isFile</span><span class="hl-1">()) {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cat</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;cat&#39;</span><span class="hl-1">, [</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">file</span><span class="hl-1">]);</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">lines</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-l&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">            </span><span class="hl-2">cat</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">;</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><br/><span class="hl-1">              </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">);</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">          }</span><br/><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">words</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-w&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">            </span><span class="hl-2">cat</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">;</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">);</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">          }</span><br/><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">argv</span><span class="hl-1">.</span><span class="hl-2">chars</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">wc</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-3">&#39;wc&#39;</span><span class="hl-1">, [</span><span class="hl-3">&#39;-c&#39;</span><span class="hl-1">]);</span><br/><span class="hl-1">            </span><span class="hl-2">cat</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">pipe</span><span class="hl-1">(</span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdin</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">wcOutput</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">piece</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">wcOutput</span><span class="hl-1"> += </span><span class="hl-2">piece</span><span class="hl-1">;</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">            </span><br/><span class="hl-1">            </span><span class="hl-2">wc</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">process</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-2">wcOutput</span><span class="hl-1">);</span><br/><span class="hl-1">            });</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&quot;El fichero no existe&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  .</span><span class="hl-5">help</span><span class="hl-1">()</span><br/><span class="hl-1">  .</span><span class="hl-2">argv</span><span class="hl-1">;</span><br/>
</code></pre>
<p>En este caso, se ha creado un objeto de tipo spawn, el cual recibe como parámetros el comando a ejecutar y los argumentos que recibe dicho comando. Una vez hemos realizado este paso se ha creado un objeto de tipo wc el cual recibe los parametros a ejecutar con el comando. Una vez hecho esto utilizamos el metodo pipe para conectar la salida del comando cat con la entrada del comando wc. Una vez hemos realizado este paso, se ha creado un evento de tipo data, el cual recibe como parámetro una pieza de datos. En este caso, la pieza de datos es la salida del comando wc. Una vez se ha recibido la pieza de datos, se ha concatenado a la variable wcOutput. Una vez se ha recibido toda la salida del comando wc, se ha creado un evento de tipo close, el cual recibe como parámetro una función de callback. En este caso, la función de callback muestra por pantalla la salida del comando wc.</p>

<a href="#ejercicio-3---funkopops" id="ejercicio-3---funkopops" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio 3 - FunkoPops</h2>
</a>
<p>En este he desarrollado una aplicación para gestionar los Funkos de los diferentes usuarios de nuestra aplicación. Para gerstionar los funkos y los usuarios que los tienen he creado 4 clases que iré explicando a continuación.</p>

<a href="#clase-funko" id="clase-funko" style="color: inherit; text-decoration: none;">
  <h3>Clase Funko</h3>
</a>
<p>  Esta clase es la que se encarga de crear los objetos de tipo Funko, para ello he creado una clase que tiene como atributos el id, nombre, descripción, tipo, genero, franquicia, numero, exclusivo, caracteristicas especiales y valor de mercado. Además, he creado un constructor que recibe todos los atributos de la clase y los asigna a los atributos de la clase. Por último, he creado los métodos get y set para cada uno de los atributos de la clase.</p>
<p>  A continuación se muestra el código de la clase Funko:</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">Funko</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_id</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_nombre</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_descripcion</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_tipo</span><span class="hl-1">: </span><span class="hl-10">Tipo</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_genero</span><span class="hl-1">: </span><span class="hl-10">Genero</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_franquicia</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_numero</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_exclusivo</span><span class="hl-1">: </span><span class="hl-10">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_caracteristicasEspeciales</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_valorDeMercado</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">nombre</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">descripcion</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">tipo</span><span class="hl-1">: </span><span class="hl-10">Tipo</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">genero</span><span class="hl-1">: </span><span class="hl-10">Genero</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">franquicia</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">numero</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">exclusivo</span><span class="hl-1">: </span><span class="hl-10">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">caracteristicasEspeciales</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">valorDeMercado</span><span class="hl-1">: </span><span class="hl-10">number</span><br/><span class="hl-1">  ) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_id</span><span class="hl-1"> = </span><span class="hl-2">id</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_nombre</span><span class="hl-1"> = </span><span class="hl-2">nombre</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_descripcion</span><span class="hl-1"> = </span><span class="hl-2">descripcion</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_tipo</span><span class="hl-1"> = </span><span class="hl-2">tipo</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_genero</span><span class="hl-1"> = </span><span class="hl-2">genero</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_franquicia</span><span class="hl-1"> = </span><span class="hl-2">franquicia</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_numero</span><span class="hl-1"> = </span><span class="hl-2">numero</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_exclusivo</span><span class="hl-1"> = </span><span class="hl-2">exclusivo</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_caracteristicasEspeciales</span><span class="hl-1"> = </span><span class="hl-2">caracteristicasEspeciales</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> = </span><span class="hl-2">valorDeMercado</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span>
</code></pre>
<p> Ademas, he creado los métodos get y set para cada uno de los atributos de la clase.</p>
<p> También he creado un enum para los tipos de Funko que hay en el mercado.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">enum</span><span class="hl-1"> </span><span class="hl-10">Tipo</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">Pop</span><span class="hl-1"> = </span><span class="hl-3">&quot;Pop!&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">PopRides</span><span class="hl-1"> = </span><span class="hl-3">&quot;Pop! Rides&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">VynilSoda</span><span class="hl-1"> = </span><span class="hl-3">&quot;Vynil Soda&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">VynilGold</span><span class="hl-1"> = </span><span class="hl-3">&quot;Vynil Gold&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span>
</code></pre>
<p> Además, he creado un enum para los géneros de Funko que hay en el mercado.</p>
<pre><code class="language-typescript"><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">enum</span><span class="hl-1"> </span><span class="hl-10">Genero</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">Animacion</span><span class="hl-1"> = </span><span class="hl-3">&quot;Animación&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">PeliculasYTV</span><span class="hl-1"> = </span><span class="hl-3">&quot;Películas y TV&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Videojuegos</span><span class="hl-1"> = </span><span class="hl-3">&quot;Videojuegos&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Deportes</span><span class="hl-1"> = </span><span class="hl-3">&quot;Deportes&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Musica</span><span class="hl-1"> = </span><span class="hl-3">&quot;Música&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">Anime</span><span class="hl-1"> = </span><span class="hl-3">&quot;Ánime&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">}</span><br/>
</code></pre>
<p>Por otra parte he desarrollado también un metodo MostarFunko que nos muestra por pantalla los datos del Funko.</p>
<pre><code class="language-typescript"><br/><span class="hl-1">  </span><span class="hl-5">mostrarFunko</span><span class="hl-1">(): </span><span class="hl-6">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`ID: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_id</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Nombre: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_nombre</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Descripción: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_descripcion</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Tipo: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_tipo</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Género: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_genero</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Franquicia: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_franquicia</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Número: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_numero</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Exclusivo: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_exclusivo</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-3">`Características especiales: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_caracteristicasEspeciales</span><span class="hl-6">}</span><span class="hl-3">`</span><br/><span class="hl-1">      )</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &lt; </span><span class="hl-4">10</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">`Valor de mercado: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &gt;= </span><span class="hl-4">10</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &lt; </span><span class="hl-4">30</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">blue</span><span class="hl-1">(</span><span class="hl-3">`Valor de mercado: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &gt;= </span><span class="hl-4">30</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &lt; </span><span class="hl-4">50</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">bgYellow</span><span class="hl-1">(</span><span class="hl-3">`Valor de mercado: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &gt;= </span><span class="hl-4">50</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &lt; </span><span class="hl-4">80</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">`Valor de mercado: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &gt;= </span><span class="hl-4">80</span><span class="hl-1"> &amp;&amp; </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-1"> &lt; </span><span class="hl-4">100</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">cyan</span><span class="hl-1">(</span><span class="hl-3">`Valor de mercado: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">magenta</span><span class="hl-1">(</span><span class="hl-3">`Valor de mercado: </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">_valorDeMercado</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">));</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">  }</span><br/>
</code></pre>
<p>Como se puede observar en el código anterior, si el valor de mercado del Funko es menor que 10, el valor de mercado se mostrará en verde, si es mayor o igual que 10 y menor que 30, el valor de mercado se mostrará en azul, si es mayor o igual que 30 y menor que 50, el valor de mercado se mostrará en amarillo, si es mayor o igual que 50 y menor que 80, el valor de mercado se mostrará en rojo, si es mayor o igual que 80 y menor que 100, el valor de mercado se mostrará en cyan y si es mayor o igual que 100, el valor de mercado se mostrará en magenta. Esto lo he hecho para cumplir con los requisitos de la práctica.</p>

<a href="#clase-funkocollection" id="clase-funkocollection" style="color: inherit; text-decoration: none;">
  <h3>Clase FunkoCollection</h3>
</a>
<p>  Esta clase es la que se encarga de crear los objetos de tipo FunkoCollection, que son los que contienen los objetos de tipo Funko. Esta clase tiene un atributo privado de tipo Funko[] que es donde se almacenan los objetos de tipo Funko. Además, tiene un atributo privado de tipo string que es el nombre del propietario de la colección de Funkos.</p>
<p>  A continuación se muestra el código de la clase FunkoCollection:</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">FunkoCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_funkos</span><span class="hl-1">: </span><span class="hl-10">Funko</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">owner</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">owner</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1"> = [];</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1"> = </span><span class="hl-2">owner</span><span class="hl-1">;</span><br/><span class="hl-1">      </span><span class="hl-8">// Crea el directorio si no existe</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">archivos</span><span class="hl-1"> = [] </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-10">string</span><span class="hl-1">[];</span><br/><span class="hl-1">      </span><span class="hl-0">try</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-8">// Lee el directorio</span><br/><span class="hl-1">        </span><span class="hl-2">archivos</span><span class="hl-1"> = </span><span class="hl-2">fs</span><br/><span class="hl-1">          .</span><span class="hl-5">readdirSync</span><span class="hl-1">(</span><span class="hl-3">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1"> + </span><span class="hl-3">&quot;/&quot;</span><span class="hl-1">, { </span><span class="hl-2">withFileTypes:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> })</span><br/><span class="hl-1">          .</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">dirent</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">dirent</span><span class="hl-1">.</span><span class="hl-5">isFile</span><span class="hl-1">())</span><br/><span class="hl-1">          .</span><span class="hl-5">map</span><span class="hl-1">((</span><span class="hl-2">dirent</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">dirent</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">);</span><br/><span class="hl-1">      } </span><span class="hl-0">catch</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">err</span><span class="hl-1">.</span><span class="hl-2">code</span><span class="hl-1"> === </span><span class="hl-3">&quot;ENOENT&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-8">// Si el error es porque el directorio no existe</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`El directorio  no existe. Creando directorio...`</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">mkdirSync</span><span class="hl-1">(</span><span class="hl-3">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Directorio  creado exitosamente.`</span><span class="hl-1">);</span><br/><span class="hl-1">        } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-8">// Si el error no es porque el directorio no existe, lanza una excepción</span><br/><span class="hl-1">          </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-2">err</span><span class="hl-1">;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><br/><span class="hl-1">      </span><span class="hl-8">/**</span><br/><span class="hl-8">       * Lee los archivos JSON y los convierte en objetos de tipo Funko</span><br/><span class="hl-8">       * y los agrega al arreglo de Funkos</span><br/><span class="hl-8">       *</span><br/><span class="hl-8">       */</span><br/><span class="hl-1">      </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> = </span><span class="hl-4">0</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1"> &lt; </span><span class="hl-2">archivos</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funko</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Funko</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">Tipo</span><span class="hl-1">.</span><span class="hl-2">Pop</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-2">Genero</span><span class="hl-1">.</span><span class="hl-2">Animacion</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">0</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funkoJSON</span><span class="hl-1"> = </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">readFileSync</span><span class="hl-1">(</span><br/><span class="hl-1">          </span><span class="hl-3">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1"> + </span><span class="hl-3">&quot;/&quot;</span><span class="hl-1"> + </span><span class="hl-2">archivos</span><span class="hl-1">[</span><span class="hl-2">i</span><span class="hl-1">],</span><br/><span class="hl-1">          </span><span class="hl-3">&quot;utf-8&quot;</span><br/><span class="hl-1">        );</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funkoLeido</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">funkoJSON</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">assign</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">, </span><span class="hl-2">funkoLeido</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">);</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    </span><br/><span class="hl-1">  }</span><br/><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-6">get</span><span class="hl-1"> </span><span class="hl-5">Owner</span><span class="hl-1">(): </span><span class="hl-10">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">get</span><span class="hl-1"> </span><span class="hl-5">funkos</span><span class="hl-1">(): </span><span class="hl-10">Funko</span><span class="hl-1">[] {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-5">setfunkos</span><span class="hl-1">(</span><span class="hl-2">funkos</span><span class="hl-1">: </span><span class="hl-10">Funko</span><span class="hl-1">[]) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1"> = </span><span class="hl-2">funkos</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">: </span><span class="hl-10">Funko</span><span class="hl-1">): </span><span class="hl-10">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funkoJSON</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">writeFileSync</span><span class="hl-1">(</span><br/><span class="hl-1">      </span><span class="hl-3">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1"> + </span><span class="hl-3">&quot;/funko&quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> + </span><span class="hl-3">&quot;.json&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">funkoJSON</span><br/><span class="hl-1">    );</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">funko</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-5">removeFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">): </span><span class="hl-10">void</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funko</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-5">getFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">unlinkSync</span><span class="hl-1">(</span><span class="hl-3">&quot;./data/&quot;</span><span class="hl-1"> + </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">owner</span><span class="hl-1"> + </span><span class="hl-3">&quot;/funko&quot;</span><span class="hl-1"> + </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> + </span><span class="hl-3">&quot;.json&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">funko</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> !== </span><span class="hl-2">id</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-5">getFunko</span><span class="hl-1">(</span><span class="hl-2">id</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">): </span><span class="hl-10">Funko</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_funkos</span><span class="hl-1">.</span><span class="hl-5">find</span><span class="hl-1">((</span><span class="hl-2">funko</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">funko</span><span class="hl-1">.</span><span class="hl-2">id</span><span class="hl-1"> === </span><span class="hl-2">id</span><span class="hl-1">) </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-10">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/>
</code></pre>
<p>Como podemos observar en el código anterior, el constructor de la clase FunkoCollection recibe como parámetro el nombre del propietario de la colección de Funkos. En el constructor se crea un arreglo de tipo Funko[] que es donde se almacenan los objetos de tipo Funko. Además, se crea un atributo privado de tipo string que es el nombre del propietario de la colección de Funkos.</p>
<p>  En el constructor se crea un directorio llamado data, que es donde se almacenan los archivos JSON de los objetos de tipo Funko. Además, se crea un directorio con el nombre del propietario de la colección de Funkos, que es donde se almacenan los archivos JSON de los objetos de tipo Funko. Si el directorio ya existe, no se crea.</p>
<p>  En el constructor se lee el directorio del propietario de la colección de Funkos y se almacenan los nombres de los archivos JSON en un arreglo de tipo string. Luego, se lee cada archivo JSON y se convierte en un objeto de tipo Funko, que se agrega al arreglo de tipo Funko[].</p>
<p>  Estas acciones se realizan en el constructor para que al crear un objeto de tipo FunkoCollection, se carguen los objetos de tipo Funko que se encuentran en el directorio del propietario de la colección de Funkos. De esta forma, al crear un objeto de tipo FunkoCollection, se cargan los objetos de tipo Funko que se encuentran en el directorio del propietario de la colección de Funkos. Utilizando para ello el modulo fs, de manera que se pueda leer y escribir archivos JSON de forma sincrónica.</p>
<p>  El método get Owner() retorna el nombre del propietario de la colección de Funkos.</p>
<p>  El método get funkos() retorna el arreglo de tipo Funko[].</p>
<p>  El método setfunkos recibe como parámetro un arreglo de tipo Funko[] y lo asigna al atributo privado de tipo Funko[].</p>
<p>  El método addFunko recibe como parámetro un objeto de tipo Funko y lo agrega al arreglo de tipo Funko[] y al directorio del propietario de la colección de Funkos.</p>
<p>  El método removeFunko recibe como parámetro el id de un objeto de tipo Funko y lo elimina del arreglo de tipo Funko[] y del directorio del propietario de la colección de Funkos.</p>
<p>  El método getFunko recibe como parámetro el id de un objeto de tipo Funko y lo retorna.</p>

<a href="#clase-user" id="clase-user" style="color: inherit; text-decoration: none;">
  <h3>Clase User</h3>
</a>
<p>La clase User representa a un usuario de la aplicación. Cada usuario tiene un nombre y una colección de Funkos. La clase User tiene los siguientes atributos:</p>
<ul>
<li>nombre: string</li>
<li>ownerOf: FunkoCollection</li>
</ul>
<p>  A continuación se muestra el código de la clase User:</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">User</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_nombre</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_ownerOf</span><span class="hl-1">: </span><span class="hl-10">FunkoCollection</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">nombre</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_nombre</span><span class="hl-1"> = </span><span class="hl-2">nombre</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">nombre</span><span class="hl-1"> !== </span><span class="hl-3">&quot;prueba&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_ownerOf</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">FunkoCollection</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">nombre</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_ownerOf</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">FunkoCollection</span><span class="hl-1">(</span><span class="hl-3">&quot;prueba&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">get</span><span class="hl-1"> </span><span class="hl-5">nombre</span><span class="hl-1">(): </span><span class="hl-10">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_nombre</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">setnombre</span><span class="hl-1">(</span><span class="hl-2">nombre</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_nombre</span><span class="hl-1"> = </span><span class="hl-2">nombre</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">get</span><span class="hl-1"> </span><span class="hl-5">ownerOf</span><span class="hl-1">(): </span><span class="hl-10">FunkoCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_ownerOf</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">setownerOf</span><span class="hl-1">(</span><span class="hl-2">ownerOf</span><span class="hl-1">: </span><span class="hl-10">FunkoCollection</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_ownerOf</span><span class="hl-1"> = </span><span class="hl-2">ownerOf</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/>
</code></pre>
<p>Como se puede ver es una clase sencilla, que tiene un atributo privado de tipo string que es el nombre del usuario y un atributo privado de tipo FunkoCollection que es la colección de Funkos del usuario.</p>
<p>  El constructor recibe como parámetro el nombre del usuario y crea un objeto de tipo FunkoCollection, que es la colección de Funkos del usuario. Si el nombre del usuario es prueba, se crea un objeto de tipo FunkoCollection con el nombre prueba, de lo contrario se crea un objeto de tipo FunkoCollection con el nombre del usuario.</p>
<p>  El método get nombre() retorna el nombre del usuario.</p>
<p>  El método setnombre recibe como parámetro el nombre del usuario y lo asigna al atributo privado de tipo string.</p>
<p>  El método get ownerOf() retorna la colección de Funkos del usuario.</p>
<p>  El método setownerOf recibe como parámetro la colección de Funkos del usuario y lo asigna al atributo privado de tipo FunkoCollection.</p>

<a href="#clase-usercollection" id="clase-usercollection" style="color: inherit; text-decoration: none;">
  <h3>Clase UserCollection</h3>
</a>
<p>La clase UserCollection representa a la colección de usuarios de la aplicación. La clase UserCollection tiene los siguientes atributos:</p>
<ul>
<li>_users: User[]</li>
</ul>
<p>  A continuación se muestra el código de la clase UserCollection:</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">UserCollection</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">_users</span><span class="hl-1">: </span><span class="hl-10">User</span><span class="hl-1">[];</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1"> = [];</span><br/><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">directorios</span><span class="hl-1"> = </span><span class="hl-2">fs</span><br/><span class="hl-1">      .</span><span class="hl-5">readdirSync</span><span class="hl-1">(</span><span class="hl-3">&quot;./data&quot;</span><span class="hl-1">, { </span><span class="hl-2">withFileTypes:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> })</span><br/><span class="hl-1">      .</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">dirent</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">dirent</span><span class="hl-1">.</span><span class="hl-5">isDirectory</span><span class="hl-1">())</span><br/><span class="hl-1">      .</span><span class="hl-5">map</span><span class="hl-1">((</span><span class="hl-2">dirent</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">dirent</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-0">for</span><span class="hl-1"> (</span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">i</span><span class="hl-1"> = </span><span class="hl-4">0</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1"> &lt; </span><span class="hl-2">directorios</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1">; </span><span class="hl-2">i</span><span class="hl-1">++) {</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">user</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">User</span><span class="hl-1">(</span><span class="hl-2">directorios</span><span class="hl-1">[</span><span class="hl-2">i</span><span class="hl-1">]);</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">): </span><span class="hl-10">User</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1">.</span><span class="hl-5">find</span><span class="hl-1">((</span><span class="hl-2">user</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">nombre</span><span class="hl-1"> === </span><span class="hl-2">name</span><span class="hl-1">) </span><span class="hl-0">as</span><span class="hl-1"> </span><span class="hl-10">User</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">addUser</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">: </span><span class="hl-10">User</span><span class="hl-1">): </span><span class="hl-10">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1">.</span><span class="hl-5">push</span><span class="hl-1">(</span><span class="hl-2">user</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">removeUserbyName</span><span class="hl-1">(</span><span class="hl-2">name</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">): </span><span class="hl-10">void</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">//borro el directorio</span><br/><span class="hl-1">    </span><span class="hl-2">fs</span><span class="hl-1">.</span><span class="hl-5">rmdirSync</span><span class="hl-1">(</span><span class="hl-3">`./data/</span><span class="hl-6">${</span><span class="hl-2">name</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">, { </span><span class="hl-2">recursive:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1"> = </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1">.</span><span class="hl-5">filter</span><span class="hl-1">((</span><span class="hl-2">user</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1">.</span><span class="hl-2">nombre</span><span class="hl-1"> !== </span><span class="hl-2">name</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-6">get</span><span class="hl-1"> </span><span class="hl-5">users</span><span class="hl-1">(): </span><span class="hl-10">User</span><span class="hl-1">[] {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">setusers</span><span class="hl-1">(</span><span class="hl-2">users</span><span class="hl-1">: </span><span class="hl-10">User</span><span class="hl-1">[]) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">_users</span><span class="hl-1"> = </span><span class="hl-2">users</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/>
</code></pre>
<p>Como podemos observar en el código anterior, el constructor de la clase UserCollection no recibe ningún parámetro. En el constructor se crea un arreglo de tipo User[] que es donde se almacenan los objetos de tipo User.</p>
<p>  En el constructor se lee el directorio data y se almacenan los nombres de los directorios en un arreglo de tipo string. Luego, se crea un objeto de tipo User por cada directorio y se agrega al arreglo de tipo User[].</p>
<p>  Estas acciones se realizan en el constructor para que al crear un objeto de tipo UserCollection, se carguen los objetos de tipo User que se encuentran en el directorio data. De esta forma, al crear un objeto de tipo UserCollection, se cargan los objetos de tipo User que se encuentran en el directorio data. Utilizando para ello el modulo fs, de manera que se pueda leer y escribir archivos JSON de forma sincrónica.</p>
<p>  El método getUserByName recibe como parámetro el nombre de un usuario y retorna el objeto de tipo User que tiene ese nombre.</p>
<p>  El método addUser recibe como parámetro un objeto de tipo User y lo agrega al arreglo de tipo User[].</p>
<p>  El método removeUserByName recibe como parámetro el nombre de un usuario y lo elimina del arreglo de tipo User[] y del directorio data.</p>
<p>  El método get users() retorna el arreglo de tipo User[].</p>
<p>  El método setusers recibe como parámetro un arreglo de tipo User[] y lo asigna al atributo privado de tipo User[].</p>

<a href="#funkopopapp" id="funkopopapp" style="color: inherit; text-decoration: none;">
  <h3>FunkoPopAPP</h3>
</a>
<p>En el archivo FunkoPopAPP.ts se encuentra el uso de todo el sistema completo mediante el modulo Yargs. Dentro de el vamos a encontrar los siguientes comandos:</p>
<ul>
<li>add</li>
<li>remove</li>
<li>update</li>
<li>list</li>
<li>read</li>
</ul>
<p>Cada uno de ellos realiza operaciones con los objetos de tipo Funko y los objetos de tipo User.</p>
<ul>
<li><p>add: Agrega un Funko a la colección de un usuario. Si no existe el usuario, lo crea.</p>
</li>
<li><p>remove: Elimina un Funko de la colección de un usuario.  </p>
</li>
<li><p>update: Actualiza un Funko de la colección de un usuario. Si no existe el usuario, no hace nada.</p>
</li>
<li><p>list: Lista los Funkos de la colección de un usuario.</p>
</li>
<li><p>read: Muestra la información de un Funko de la colección de un usuario.</p>
</li>
</ul>

<a href="#ampliación-correspondiente-a-la-práctica-10" id="ampliación-correspondiente-a-la-práctica-10" style="color: inherit; text-decoration: none;">
  <h3>Ampliación correspondiente a la práctica 10</h3>
</a>
<p>Como ampliación a lo desarrollado hasta el momento, se ha creado un modelo cliente servidor mediante el modulo net. Además adicionalmente se ha creado las clases Sercidor y Cliente, y también se ha creado dos tipos para las peticiones y las respuestas.</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-10">RequestType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">nameuser</span><span class="hl-1">?: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">namefunko</span><span class="hl-1">?: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkoPop</span><span class="hl-1">?: </span><span class="hl-10">Funko</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">type</span><span class="hl-1"> </span><span class="hl-10">ResponseType</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-2">type</span><span class="hl-1">: </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1"> | </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">success</span><span class="hl-1">: </span><span class="hl-10">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-2">funkopops</span><span class="hl-1">?: </span><span class="hl-10">Funko</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span><br/>
</code></pre>
<p>Como podemos observar en el código anterior, se ha creado dos tipos, RequestType y ResponseType. El tipo RequestType representa la petición que se envía al servidor, y el tipo ResponseType representa la respuesta que se envía al cliente.</p>
<p>  El tipo RequestType tiene los siguientes atributos:</p>
<ul>
<li><p>type: &#39;add&#39; | &#39;update&#39; | &#39;remove&#39; | &#39;read&#39; | &#39;list&#39;</p>
</li>
<li><p>nameuser?: string</p>
</li>
<li><p>namefunko?: number</p>
</li>
<li><p>funkoPop?: Funko</p>
</li>
</ul>
<p>  El tipo ResponseType tiene los siguientes atributos:</p>
<ul>
<li><p>type: &#39;add&#39; | &#39;update&#39; | &#39;remove&#39; | &#39;read&#39; | &#39;list&#39;</p>
</li>
<li><p>success: boolean</p>
</li>
<li><p>funkopops?: Funko[]</p>
</li>
</ul>
<p>  A continuación se muestra el código de la clase Servidor:</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">Server</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">server</span><span class="hl-1">: </span><span class="hl-10">net</span><span class="hl-1">.</span><span class="hl-10">Server</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">response_</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> = </span><span class="hl-2">port</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">start</span><span class="hl-1">() {</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Servidor iniciado en el puerto </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">port</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;connection&#39;</span><span class="hl-1">, (</span><span class="hl-2">socket</span><span class="hl-1">: </span><span class="hl-10">net</span><span class="hl-1">.</span><span class="hl-10">Socket</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">requestData</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-5">from</span><span class="hl-1">(</span><span class="hl-3">&#39;&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">: </span><span class="hl-10">Buffer</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-8">// Acumula los datos recibidos en el búfer</span><br/><span class="hl-1">        </span><span class="hl-2">requestData</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-5">concat</span><span class="hl-1">([</span><span class="hl-2">requestData</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">]);</span><br/><span class="hl-1">       </span><br/><span class="hl-1">        </span><span class="hl-8">// Busca el delimitador al final de la petición</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">delimiter</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-5">from</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">delimiterIndex</span><span class="hl-1"> = </span><span class="hl-2">requestData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-2">delimiter</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-8">// Se encontró el delimitador, procesa la petición</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">delimiterIndex</span><span class="hl-1"> !== -</span><span class="hl-4">1</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-8">// Emitir evento &#39;request&#39; para indicar que se ha recibido una petición completa</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1"> = </span><span class="hl-2">requestData</span><span class="hl-1">.</span><span class="hl-5">slice</span><span class="hl-1">(</span><span class="hl-4">0</span><span class="hl-1">, </span><span class="hl-2">delimiterIndex</span><span class="hl-1">).</span><span class="hl-5">toString</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-8">//La petición es un objeto JSON, por lo que se convierte a objeto</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">requestObj</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-8">// Se procesa la petición en este caso el primer parámetro es el comando y el segundo es el array de parámetros</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Petición recibida: </span><span class="hl-6">${</span><span class="hl-2">requestObj</span><span class="hl-11">.</span><span class="hl-2">type</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-8">// Se procesa la petición y se obtiene la respuesta</span><br/><span class="hl-1">          </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1">: </span><span class="hl-10">ResponseType</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">) !== </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> ( </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">getFunko</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1">) === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">                </span><br/><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">funkopops:</span><span class="hl-1"> [</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">getFunko</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1">)]</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;User not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;read&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          } </span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">) !== </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">funkopops:</span><span class="hl-1"> </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-2">funkos</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;User not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;list&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1">) {</span><br/><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">)?.</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">getFunko</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1">) === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">FunkoToAdd</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Funko</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">Tipo</span><span class="hl-1">.</span><span class="hl-2">Pop</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">Genero</span><span class="hl-1">.</span><span class="hl-2">Animacion</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-4">0</span><br/><span class="hl-1">              );</span><br/><span class="hl-1">              </span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">assign</span><span class="hl-1">(</span><span class="hl-2">FunkoToAdd</span><span class="hl-1">, </span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">);</span><br/><span class="hl-1">              </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">tipo</span><span class="hl-1"> = </span><span class="hl-2">FunkoToAdd</span><span class="hl-1">.</span><span class="hl-2">tipo</span><span class="hl-1">;</span><br/><span class="hl-1">              </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">gender</span><span class="hl-1"> = </span><span class="hl-2">FunkoToAdd</span><span class="hl-1">.</span><span class="hl-2">genero</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">estaEnEnum</span><span class="hl-1">(</span><span class="hl-2">tipo</span><span class="hl-1">, </span><span class="hl-2">Tipo</span><span class="hl-1">)) {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo correcto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo incorrecto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">estaEnEnum</span><span class="hl-1">(</span><span class="hl-2">gender</span><span class="hl-1">, </span><span class="hl-2">Genero</span><span class="hl-1">)) {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Género correcto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Género incorrecto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">              }</span><br/><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">) === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;User not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-3">&quot;Creating user...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">addUser</span><span class="hl-1">(</span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">User</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">, </span><span class="hl-2">FunkoToAdd</span><span class="hl-1">));</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">FunkoToAdd</span><span class="hl-1">);</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko already exists on user &quot;</span><span class="hl-1"> + </span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">FunkoToAdd</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Funko</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">Tipo</span><span class="hl-1">.</span><span class="hl-2">Pop</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">Genero</span><span class="hl-1">.</span><span class="hl-2">Animacion</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-4">0</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">assign</span><span class="hl-1">(</span><span class="hl-2">FunkoToAdd</span><span class="hl-1">, </span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">funkoPop</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">tipo</span><span class="hl-1"> = </span><span class="hl-2">FunkoToAdd</span><span class="hl-1">.</span><span class="hl-2">tipo</span><span class="hl-1">;</span><br/><span class="hl-1">            </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">gender</span><span class="hl-1"> = </span><span class="hl-2">FunkoToAdd</span><span class="hl-1">.</span><span class="hl-2">genero</span><span class="hl-1">;</span><br/><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">estaEnEnum</span><span class="hl-1">(</span><span class="hl-2">tipo</span><span class="hl-1">, </span><span class="hl-2">Tipo</span><span class="hl-1">)) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo correcto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Tipo incorrecto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-5">estaEnEnum</span><span class="hl-1">(</span><span class="hl-2">gender</span><span class="hl-1">, </span><span class="hl-2">Genero</span><span class="hl-1">)) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Género correcto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">error</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Género incorrecto&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">) === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;User not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-3">&quot;Creating user...&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">addUser</span><span class="hl-1">(</span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">User</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1"> , </span><span class="hl-2">FunkoToAdd</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">addFunko</span><span class="hl-1">(</span><span class="hl-2">FunkoToAdd</span><span class="hl-1">);</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><br/><span class="hl-1">              </span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><br/><span class="hl-1">                </span><span class="hl-3">&quot;Funko &quot;</span><span class="hl-1"> +</span><br/><span class="hl-1">                  </span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1"> +</span><br/><span class="hl-1">                  </span><span class="hl-3">&quot; añadido al usuario &quot;</span><span class="hl-1"> +</span><br/><span class="hl-1">                  </span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1"> +</span><br/><span class="hl-1">                  </span><span class="hl-3">&quot; correctamente&quot;</span><br/><span class="hl-1">              )</span><br/><span class="hl-1">            );</span><br/><span class="hl-1">            </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">              </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">          }</span><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">) !== </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">getFunko</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1">) === </span><span class="hl-6">undefined</span><span class="hl-1">) {</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">              } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">                </span><span class="hl-2">users</span><span class="hl-1">.</span><span class="hl-5">getUserByName</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">nameuser</span><span class="hl-1">).</span><span class="hl-2">ownerOf</span><span class="hl-1">.</span><span class="hl-5">removeFunko</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1">);</span><br/><span class="hl-1">                </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko &quot;</span><span class="hl-1"> + </span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">namefunko</span><span class="hl-1"> + </span><span class="hl-3">&quot; deleted successfully&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">                </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                  </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">true</span><br/><span class="hl-1">                };</span><br/><span class="hl-1">              }</span><br/><span class="hl-1">            }</span><br/><span class="hl-1">            </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;User not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">              </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">                </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;remove&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">                </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><br/><span class="hl-1">              };</span><br/><span class="hl-1">            }</span><br/><br/><span class="hl-1">          }</span><br/><br/><br/><span class="hl-1">          </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Type not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">            </span><span class="hl-2">response</span><span class="hl-1"> = {</span><br/><span class="hl-1">              </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&#39;add&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">              </span><span class="hl-2">success:</span><span class="hl-1"> </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">            };</span><br/><span class="hl-1">          }</span><br/><br/><br/><span class="hl-1">          </span><span class="hl-8">// Se envía la respuesta al cliente</span><br/><span class="hl-1">          </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">) + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-8">// Se cierra la conexión</span><br/><span class="hl-1">          </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();     </span><br/><span class="hl-1">                  </span><br/><br/><span class="hl-1">        }</span><br/><br/><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">  }</span><br/>
</code></pre>
<p>  En el código anterior, podemos ver como se ha implementado la clase servidor que se encarga de recibir las peticiones del cliente y de enviar las respuestas correspondientes al tipo de petición realizada. </p>
<p> Pasando a la clase cliente, podemos ver como se ha implementado la clase cliente que se encarga de realizar las peticiones al servidor y de recibir las respuestas correspondientes al tipo de petición realizada.</p>
<pre><code class="language-typescript"><br/><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">Client</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">client</span><span class="hl-1">: </span><span class="hl-10">net</span><span class="hl-1">.</span><span class="hl-10">Socket</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">port</span><span class="hl-1"> : </span><span class="hl-10">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> = </span><span class="hl-2">port</span><span class="hl-1">    </span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-8">//metodo start que recibe como parametro un JSON</span><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">start</span><span class="hl-1">(</span><span class="hl-2">peticion</span><span class="hl-1">: </span><span class="hl-10">RequestType</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createConnection</span><span class="hl-1">({ </span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> }, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Conexión establecida con el servidor&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-8">// Enviar la petición al servidor</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">peticion</span><span class="hl-1">) + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataJSON</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-8">// Procesa la respuesta recibida</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">dataJSON</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Respuesta recibida: `</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">funko1</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Funko</span><span class="hl-1">(</span><br/><span class="hl-1">        </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">Tipo</span><span class="hl-1">.</span><span class="hl-2">Pop</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">Genero</span><span class="hl-1">.</span><span class="hl-2">Animacion</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">0</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-6">false</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">0</span><br/><span class="hl-1">      );</span><br/><span class="hl-1">      </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;read&quot;</span><span class="hl-1"> || </span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;list&quot;</span><span class="hl-1">  ) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">funkopops</span><span class="hl-1">.</span><span class="hl-5">forEach</span><span class="hl-1">((</span><span class="hl-2">funko</span><span class="hl-1">: </span><span class="hl-10">Funko</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">Object</span><span class="hl-1">.</span><span class="hl-5">assign</span><span class="hl-1">(</span><span class="hl-2">funko1</span><span class="hl-1">, </span><span class="hl-2">funko</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><span class="hl-2">funko1</span><span class="hl-1">.</span><span class="hl-5">mostrarFunko</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">yellow</span><span class="hl-1">(</span><span class="hl-3">&quot;----------------------------------------------&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        });</span><br/><span class="hl-1">        </span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko not found&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><br/><br/><br/><span class="hl-1">      </span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;add&quot;</span><span class="hl-1"> ) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko added&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko not added&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;update&quot;</span><span class="hl-1"> ) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko updated&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko not updated&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><span class="hl-0">else</span><span class="hl-1"> </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">type</span><span class="hl-1"> == </span><span class="hl-3">&quot;remove&quot;</span><span class="hl-1"> ) {</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">green</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko removed&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">        </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">chalk</span><span class="hl-1">.</span><span class="hl-5">red</span><span class="hl-1">(</span><span class="hl-3">&quot;Funko not removed&quot;</span><span class="hl-1">));</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">      </span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Conexión cerrada con el servidor&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/>
</code></pre>
<p> La clase cliente se encarga de realizar las peticiones al servidor y de recibir las respuestas correspondientes al tipo de petición realizada.</p>

<a href="#ejercicio-pe102" id="ejercicio-pe102" style="color: inherit; text-decoration: none;">
  <h2>Ejercicio PE102</h2>
</a>
<p>Para este ejercicio de practicas hemos desarrollado una clase cliente y otra servidor que se encargan de realizar las peticiones al servidor y de recibir las respuestas correspondientes al tipo de petición realizada.</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">Client</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">client</span><span class="hl-1">: </span><span class="hl-10">net</span><span class="hl-1">.</span><span class="hl-10">Socket</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">port</span><span class="hl-1"> : </span><span class="hl-10">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> = </span><span class="hl-2">port</span><span class="hl-1">    </span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">start</span><span class="hl-1">(</span><span class="hl-2">peticion</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">[]) {</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createConnection</span><span class="hl-1">({ </span><span class="hl-2">port:</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> }, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Conexión establecida con el servidor&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><br/><span class="hl-1">      </span><span class="hl-8">// contruir el objeto JSON</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1"> = {</span><br/><span class="hl-1">        </span><span class="hl-2">command:</span><span class="hl-1"> </span><span class="hl-2">peticion</span><span class="hl-1">[</span><span class="hl-4">0</span><span class="hl-1">],</span><br/><span class="hl-1">        </span><span class="hl-2">params:</span><span class="hl-1"> [...</span><span class="hl-2">peticion</span><span class="hl-1">]</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">      </span><span class="hl-8">// Enviar la petición al servidor</span><br/><span class="hl-1">      </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">) + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">            </span><br/><span class="hl-1">    });</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">dataJSON</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-8">// Procesa la respuesta recibida</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">response</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">dataJSON</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">());</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Respuesta recibida: `</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-2">response</span><span class="hl-1">.</span><span class="hl-2">text</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">client</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Conexión cerrada con el servidor&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">}</span><br/>
</code></pre>
<p>  En el código anterior, podemos ver como se ha implementado la clase cliente que se encarga de realizar las peticiones de ejecución de comandos al servidor y de recibir las respuestas correspondientes al tipo de petición realizada.</p>
<pre><code class="language-typescript"><br/><span class="hl-0">export</span><span class="hl-1"> </span><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-10">Server</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">server</span><span class="hl-1">: </span><span class="hl-10">net</span><span class="hl-1">.</span><span class="hl-10">Server</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-2">response_</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-1">  </span><span class="hl-6">constructor</span><span class="hl-1">(</span><span class="hl-2">port</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1"> = </span><span class="hl-2">port</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1"> = </span><span class="hl-2">net</span><span class="hl-1">.</span><span class="hl-5">createServer</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">start</span><span class="hl-1">() {</span><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">listen</span><span class="hl-1">(</span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">port</span><span class="hl-1">, () </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Servidor iniciado en el puerto </span><span class="hl-6">${</span><span class="hl-6">this</span><span class="hl-11">.</span><span class="hl-2">port</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">    });</span><br/><br/><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;connection&#39;</span><span class="hl-1">, (</span><span class="hl-2">socket</span><span class="hl-1">: </span><span class="hl-10">net</span><span class="hl-1">.</span><span class="hl-10">Socket</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">requestData</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-5">from</span><span class="hl-1">(</span><span class="hl-3">&#39;&#39;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">: </span><span class="hl-10">Buffer</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-8">// Acumula los datos recibidos en el búfer</span><br/><span class="hl-1">        </span><span class="hl-2">requestData</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-5">concat</span><span class="hl-1">([</span><span class="hl-2">requestData</span><span class="hl-1">, </span><span class="hl-2">data</span><span class="hl-1">]);</span><br/><span class="hl-1">       </span><br/><span class="hl-1">        </span><span class="hl-8">// Busca el delimitador al final de la petición</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">delimiter</span><span class="hl-1"> = </span><span class="hl-2">Buffer</span><span class="hl-1">.</span><span class="hl-5">from</span><span class="hl-1">(</span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">delimiterIndex</span><span class="hl-1"> = </span><span class="hl-2">requestData</span><span class="hl-1">.</span><span class="hl-5">indexOf</span><span class="hl-1">(</span><span class="hl-2">delimiter</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><br/><span class="hl-1">        </span><span class="hl-8">// Se encontró el delimitador, procesa la petición</span><br/><span class="hl-1">        </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">delimiterIndex</span><span class="hl-1"> !== -</span><span class="hl-4">1</span><span class="hl-1">) {</span><br/><span class="hl-1">          </span><span class="hl-8">// Emitir evento &#39;request&#39; para indicar que se ha recibido una petición completa</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">request</span><span class="hl-1"> = </span><span class="hl-2">requestData</span><span class="hl-1">.</span><span class="hl-5">slice</span><span class="hl-1">(</span><span class="hl-4">0</span><span class="hl-1">, </span><span class="hl-2">delimiterIndex</span><span class="hl-1">).</span><span class="hl-5">toString</span><span class="hl-1">();</span><br/><span class="hl-1">          </span><span class="hl-8">//La petición es un objeto JSON, por lo que se convierte a objeto</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">requestObj</span><span class="hl-1"> = </span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">parse</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-8">// Se procesa la petición en este caso el primer parámetro es el comando y el segundo es el array de parámetros</span><br/><span class="hl-1">          </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Petición recibida: </span><span class="hl-6">${</span><span class="hl-2">requestObj</span><span class="hl-11">.</span><span class="hl-2">command</span><span class="hl-6">}</span><span class="hl-3"> </span><span class="hl-6">${</span><span class="hl-2">requestObj</span><span class="hl-11">.</span><span class="hl-2">params</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">          </span><span class="hl-8">//ejecutar el comando de manera sincrona sin metodos auxiliares</span><br/><span class="hl-1">          </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">child</span><span class="hl-1"> = </span><span class="hl-5">spawn</span><span class="hl-1">(</span><span class="hl-2">requestObj</span><span class="hl-1">.</span><span class="hl-2">command</span><span class="hl-1"> );</span><br/><span class="hl-1">          </span><span class="hl-6">let</span><span class="hl-1"> </span><span class="hl-2">response</span><span class="hl-1"> = </span><span class="hl-3">&#39;&#39;</span><span class="hl-1">;</span><br/><span class="hl-1">          </span><span class="hl-2">child</span><span class="hl-1">.</span><span class="hl-2">stdout</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-2">data</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-8">// Almacenar la respuesta en la variable &quot;response&quot;</span><br/><span class="hl-1">            </span><span class="hl-2">response</span><span class="hl-1"> += </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-5">toString</span><span class="hl-1">();</span><br/><span class="hl-1">            </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Respuesta recibida: </span><span class="hl-6">${</span><span class="hl-2">response</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">          </span><span class="hl-2">child</span><span class="hl-1">.</span><span class="hl-5">on</span><span class="hl-1">(</span><span class="hl-3">&#39;close&#39;</span><span class="hl-1">, (</span><span class="hl-2">code</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">code</span><span class="hl-1"> !== </span><span class="hl-4">0</span><span class="hl-1">) {</span><br/><span class="hl-1">              </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">`Comando fallido con código </span><span class="hl-6">${</span><span class="hl-2">code</span><span class="hl-6">}</span><span class="hl-3">`</span><span class="hl-1">);</span><br/><span class="hl-1">            } </span><span class="hl-0">else</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">                   </span><br/><span class="hl-1">                  </span><span class="hl-8">// Construir el objeto JSON con la respuesta</span><br/><span class="hl-1">                  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">responseObj</span><span class="hl-1"> = {</span><br/><span class="hl-1">                    </span><span class="hl-2">text:</span><span class="hl-1"> </span><span class="hl-2">response</span><br/><span class="hl-1">                  };</span><br/><span class="hl-1">                  </span><span class="hl-8">// Enviar la respuesta al cliente</span><br/><span class="hl-1">                  </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">write</span><span class="hl-1">(</span><span class="hl-7">JSON</span><span class="hl-1">.</span><span class="hl-5">stringify</span><span class="hl-1">(</span><span class="hl-2">responseObj</span><span class="hl-1">) + </span><span class="hl-3">&#39;</span><span class="hl-9">\n</span><span class="hl-3">&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">                  </span><span class="hl-8">// Cerrar la conexión</span><br/><span class="hl-1">                  </span><br/><span class="hl-1">                  </span><span class="hl-2">socket</span><span class="hl-1">.</span><span class="hl-5">end</span><span class="hl-1">();</span><br/><br/><br/><span class="hl-1">            }</span><br/><span class="hl-1">          });</span><br/><span class="hl-1">                  </span><br/><br/><span class="hl-1">        }</span><br/><span class="hl-1">      });</span><br/><span class="hl-1">    });</span><br/><br/><span class="hl-1">  }</span><br/><br/><br/><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">getResponse</span><span class="hl-1">(): </span><span class="hl-10">string</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">response_</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">public</span><span class="hl-1"> </span><span class="hl-5">stop</span><span class="hl-1">() {</span><br/><span class="hl-1">    </span><span class="hl-6">this</span><span class="hl-1">.</span><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">close</span><span class="hl-1">();</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">server</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Server</span><span class="hl-1">(</span><span class="hl-4">63004</span><span class="hl-1">);</span><br/><br/><span class="hl-2">server</span><span class="hl-1">.</span><span class="hl-5">start</span><span class="hl-1">();</span><br/>
</code></pre>
<p>  En el código anterior, podemos ver como se ha implementado la clase servidor que se encarga de recibir las peticiones de ejecución de comandos del cliente, ejecutar el comando mediante un child process y devolver la respuesta al cliente.</p>

<a href="#conclusiones" id="conclusiones" style="color: inherit; text-decoration: none;">
  <h2>Conclusiones</h2>
</a>
<p>  Como conclusión podemos decir que hemos aprendido a realizar peticiones al servidor mediante sockets y a recibir las respuestas correspondientes al tipo de petición realizada. Además, hemos aprendido a ejecutar comandos de manera sincrona mediante un child process.
  Aunque destacar la dificultad de empezar a trabajar con codigo asíncrono, ya que es algo que  hemos trabajado en clase pero que nos ha costado un poco de trabajo entenderlo y aplicarlo. Aún así he intentado resolver los ejercicios propuestos de la mejor manera posible. </p>
<p>  Destacar desde mi punto de vista que la mayor dificultad ha sido el desarrollo de la pruebas para el codigo desarrollado puesto que la complejidad que ha supuesto el trabajo con codigo asincrono ha hecho que las pruebas no funcionen correctamente.</p>
</div></div>
<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
<div class="tsd-navigation settings">
<details class="tsd-index-accordion"><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Settings</h3></summary>
<div class="tsd-accordion-details">
<div class="tsd-filter-visibility">
<h4 class="uppercase">Member Visibility</h4><form>
<ul id="tsd-filter-options">
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-private" name="private"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Private</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li>
<li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div>
<div class="tsd-theme-toggle">
<h4 class="uppercase">Theme</h4><select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div>
<nav class="tsd-navigation primary">
<details class="tsd-index-accordion" open><summary class="tsd-accordion-summary">
<h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M4.93896 8.531L12 15.591L19.061 8.531L16.939 6.409L12 11.349L7.06098 6.409L4.93896 8.531Z" fill="var(--color-text)"></path></svg> Modules</h3></summary>
<div class="tsd-accordion-details">
<ul>
<li class="current selected"><a href="modules.html">doc-<wbr/>test</a>
<ul>
<li class="tsd-kind-module"><a href="modules/classClient.html">class<wbr/>Client</a></li>
<li class="tsd-kind-module"><a href="modules/classServer.html">class<wbr/>Server</a></li></ul></li></ul></div></details></nav></div></div>
<div class="container tsd-generator">
<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div>
<div class="overlay"></div><script src="assets/main.js"></script></body></html>